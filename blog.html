<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ë–ª–æ–≥ ‚Äî –û–ª–µ–∫—Å–∞–Ω–¥—Ä</title>
  <meta name="description" content="–°—Ç–∞—Ç—Ç—ñ –ø—Ä–æ UX, JavaScript, –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫—É, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∏–π –¥–∏–∑–∞–π–Ω">
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/gpts-styles.css">
</head>
<body>
  <div class="layout">
    <aside id="navigation"></aside>

    <main>
      <!-- üß≠ –•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ –¥–ª—è —Ä–æ–∑–¥—ñ–ª—É -->
      <div id="breadcrumbs-container" style="max-width:1100px; margin:0 auto; padding:0 40px;"></div>

      <div class="container">
        <section class="section">
          <h1>–ë–ª–æ–≥</h1>
          <p class="meta">–°—Ç–∞—Ç—Ç—ñ –ø—Ä–æ UX, JavaScript, –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫—É —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∏–π –¥–∏–∑–∞–π–Ω</p>
          
          <!-- –ü–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∏ -->
          <div class="search-filters">
            <!-- –ü–æ—à—É–∫ -->
            <div class="search-box">
              <input 
                type="search" 
                id="search-input" 
                class="search-field" 
                placeholder="üîç –ü–æ—à—É–∫ —Å—Ç–∞—Ç–µ–π..."
                aria-label="–ü–æ—à—É–∫ —Å—Ç–∞—Ç–µ–π"
              />
            </div>
            
            <!-- –§—ñ–ª—å—Ç—Ä–∏ –ø–æ —Ç–µ–≥–∞—Ö -->
            <div class="filter-tags" id="filter-tags">
              <button class="filter-tag active" data-tag="all" onclick="filterByTag('all')">
                –í—Å—ñ
              </button>
              <!-- –Ü–Ω—à—ñ —Ç–µ–≥–∏ –¥–æ–¥–∞–¥—É—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
          </div>
          
          <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ -->
          <div class="results-info" id="results-info">
            –ü–æ–∫–∞–∑–∞–Ω–æ: <strong id="results-count">0</strong> —Å—Ç–∞—Ç–µ–π
          </div>
          
          <!-- –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤ -->
          <div id="posts-list" class="posts-list">
            <div class="loading-state">
              <div class="spinner"></div>
              <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤...</p>
            </div>
          </div>
          
          <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ -->
          <div id="no-results" class="no-results" style="display: none;">
            <h3>üòî –ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h3>
            <p>–°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å —ñ–Ω—à–∏–π —Ç–µ–≥</p>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/nav.js"></script>
  <!-- üß≠ breadcrumbs -->
  <script src="js/breadcrumbs.js"></script>
  <script>
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è breadcrumbs –¥–ª—è —Ä–æ–∑–¥—ñ–ª—É
    document.addEventListener('DOMContentLoaded', () => {
      if (window.initBreadcrumbs) window.initBreadcrumbs();
    });
  </script>

  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
    let allPosts = [];
    let currentTag = 'all';
    let currentSearch = '';
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ—Å—Ç—ñ–≤
    async function loadAllPosts() {
      try {
        const response = await fetch('data/posts/index.json');
        allPosts = await response.json();
        
        // –°–æ—Ä—Ç—É—î–º–æ –ø–æ—Å—Ç–∏ –∑–∞ –¥–∞—Ç–æ—é (–Ω–æ–≤—ñ—à—ñ —Å–ø–æ—á–∞—Ç–∫—É)
        allPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        // –ì–µ–Ω–µ—Ä—É—î–º–æ —Ñ—ñ–ª—å—Ç—Ä–∏ –ø–æ —Ç–µ–≥–∞—Ö
        generateTagFilters();
        
        // –ü–æ–∫–∞–∑—É—î–º–æ –ø–æ—Å—Ç–∏
        displayPosts();
        
        // –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –ø–æ—à—É–∫
        setupSearch();
        
      } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤:', error);
        document.getElementById('posts-list').innerHTML = `
          <div class="error-message">
            <p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ—Å—Ç–∏</p>
          </div>
        `;
      }
    }
    
    // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–Ω–æ–ø–æ–∫ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –ø–æ —Ç–µ–≥–∞—Ö
    function generateTagFilters() {
      const tags = window.utils.getAllTags(allPosts);
      const container = document.getElementById('filter-tags');
      
      // –ö–Ω–æ–ø–∫–∞ "–í—Å—ñ" –≤–∂–µ —î –≤ HTML
      
      // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ–≥—É
      tags.forEach(tag => {
        const button = document.createElement('button');
        button.className = 'filter-tag';
        button.dataset.tag = tag;
        button.textContent = tag;
        button.onclick = () => filterByTag(tag);
        container.appendChild(button);
      });
    }
    
    // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Ç–µ–≥—É
    function filterByTag(tag) {
      currentTag = tag;
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –∞–∫—Ç–∏–≤–Ω—É –∫–Ω–æ–ø–∫—É
      document.querySelectorAll('.filter-tag').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.tag === tag);
      });
      
      displayPosts();
    }
    
    // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
    function setupSearch() {
      const searchInput = document.getElementById('search-input');
      
      // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ debounce –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
      const debouncedSearch = window.utils.debounce((query) => {
        currentSearch = query;
        
        // –Ø–∫—â–æ —î –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç ‚Äî —Å–∫–∏–¥–∞—î–º–æ —Ñ—ñ–ª—å—Ç—Ä —Ç–µ–≥—ñ–≤ –Ω–∞ "–í—Å—ñ"
        if (query.trim() !== '') {
          currentTag = 'all';
          document.querySelectorAll('.filter-tag').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.tag === 'all');
          });
        }
        
        displayPosts();
      }, 300);
      
      searchInput.addEventListener('input', (e) => {
        debouncedSearch(e.target.value);
      });
    }
    
    // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é
    function displayPosts() {
      const list = document.getElementById('posts-list');
      const noResults = document.getElementById('no-results');
      const resultsCount = document.getElementById('results-count');
      
      // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –ø–æ —Ç–µ–≥—É
      let filteredPosts = currentTag === 'all' 
        ? allPosts 
        : window.utils.filterByTag(allPosts, currentTag);
      
      // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –ø–æ –ø–æ—à—É–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Ç—É
      if (currentSearch) {
        filteredPosts = window.utils.searchItems(
          filteredPosts, 
          currentSearch,
          ['title', 'excerpt', 'tags', 'content']
        );
      }
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫
      resultsCount.textContent = filteredPosts.length;
      
      // –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
      if (filteredPosts.length === 0) {
        list.style.display = 'none';
        noResults.style.display = 'block';
        return;
      }
      
      // –ü–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
      list.style.display = 'flex';
      noResults.style.display = 'none';
      list.innerHTML = '';
      
      filteredPosts.forEach(post => {
        const card = document.createElement('a');
        card.className = 'post-card';
        card.href = `post.html?post=${post.slug}`;
        card.style.display = 'block';
        card.style.color = 'inherit';
        
        // –§–æ—Ä–º—É—î–º–æ —Ç–µ–≥–∏
        const tagsHTML = post.tags && post.tags.length > 0
          ? post.tags.map(tag => `<span class="chip">#${tag}</span>`).join(' ')
          : '';
        
        // –§–æ—Ä–º—É—î–º–æ –º–µ—Ç–∞-—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
        const metaParts = [];
        if (post.date) {
          metaParts.push(window.utils.formatDate(post.date));
        }
        if (post.readTime) {
          metaParts.push(`${post.readTime} —Ö–≤ —á–∏—Ç–∞–Ω–Ω—è`);
        }
        const metaHTML = metaParts.length > 0 
          ? `<div class="post-meta">${metaParts.join(' ‚Ä¢ ')}</div>`
          : '';
        
        card.innerHTML = `
          <h3>${highlightText(post.title, currentSearch)}</h3>
          ${metaHTML}
          ${tagsHTML ? `<div style="margin: 8px 0;">${tagsHTML}</div>` : ''}
          <p class="post-excerpt">${highlightText(post.excerpt, currentSearch)}</p>
          <span class="read-more">–ß–∏—Ç–∞—Ç–∏ –¥–∞–ª—ñ ‚Üí</span>
        `;
        
        list.appendChild(card);
      });
    }
    
    // –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
    function highlightText(text, query) {
      if (!query || query.trim() === '') return text;
      
      const regex = new RegExp(`(${query})`, 'gi');
      return text.replace(regex, '<mark>$1</mark>');
    }
    
    // –ó–∞–ø—É—Å–∫
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadAllPosts);
    } else {
      loadAllPosts();
    }
  </script>
</body>
</html>
