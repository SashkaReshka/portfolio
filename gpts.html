<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GPTs Lab ‚Äî –û–ª–µ–∫—Å–∞–Ω–¥—Ä</title>
  <meta name="description" content="–ö–æ–ª–µ–∫—Ü—ñ—è custom GPT –∞—Å–∏—Å—Ç–µ–Ω—Ç—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–∞–¥–∞—á">
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/gpts-styles.css">
</head>
<body>
  <div class="layout">
    <aside id="navigation"></aside>

    <main>
      <div class="container">
        <section class="section">
          <h1>üß™ GPTs Lab</h1>
          <p class="meta">–ö–æ–ª–µ–∫—Ü—ñ—è custom GPT –∞—Å–∏—Å—Ç–µ–Ω—Ç—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–∞–¥–∞—á</p>
          
          <!-- –ü–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∏ -->
          <div class="search-filters">
            <!-- –ü–æ—à—É–∫ -->
            <div class="search-box">
              <input 
                type="search" 
                id="search-input" 
                class="search-field" 
                placeholder="üîç –ü–æ—à—É–∫ GPT..."
                aria-label="–ü–æ—à—É–∫ GPT"
              />
            </div>
            
            <!-- –§—ñ–ª—å—Ç—Ä–∏ –ø–æ —Ç–µ–≥–∞—Ö -->
            <div class="filter-tags" id="filter-tags">
              <button class="filter-tag active" data-tag="all" onclick="filterByTag('all')">
                –í—Å—ñ
              </button>
              <!-- –Ü–Ω—à—ñ —Ç–µ–≥–∏ –¥–æ–¥–∞–¥—É—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
          </div>
          
          <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ -->
          <div class="results-info" id="results-info">
            –ü–æ–∫–∞–∑–∞–Ω–æ: <strong id="results-count">0</strong> GPTs
          </div>
          
          <!-- –°—ñ—Ç–∫–∞ GPTs -->
          <div id="gpts-grid" class="grid cols-3">
            <div class="loading-state">
              <div class="spinner"></div>
              <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPTs...</p>
            </div>
          </div>
          
          <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ -->
          <div id="no-results" class="no-results" style="display: none;">
            <h3>üòî –ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h3>
            <p>–°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å —ñ–Ω—à–∏–π —Ç–µ–≥</p>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/nav.js"></script>
  
  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
    let allGpts = [];
    let currentTag = 'all';
    let currentSearch = '';
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö GPTs
    async function loadAllGpts() {
      try {
        const response = await fetch('data/gpts.json');
        allGpts = await response.json();
        
        // –°–æ—Ä—Ç—É—î–º–æ: —Å–ø–æ—á–∞—Ç–∫—É featured, –ø–æ—Ç—ñ–º –∑–∞ –¥–∞—Ç–æ—é
        allGpts.sort((a, b) => {
          if (a.featured && !b.featured) return -1;
          if (!a.featured && b.featured) return 1;
          return new Date(b.date) - new Date(a.date);
        });
        
        // –ì–µ–Ω–µ—Ä—É—î–º–æ —Ñ—ñ–ª—å—Ç—Ä–∏ –ø–æ —Ç–µ–≥–∞—Ö
        generateTagFilters();
        
        // –ü–æ–∫–∞–∑—É—î–º–æ GPTs
        displayGpts();
        
        // –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –ø–æ—à—É–∫
        setupSearch();
        
      } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPTs:', error);
        document.getElementById('gpts-grid').innerHTML = `
          <div class="error-message">
            <p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ GPTs</p>
          </div>
        `;
      }
    }
    
    // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–Ω–æ–ø–æ–∫ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –ø–æ —Ç–µ–≥–∞—Ö
    function generateTagFilters() {
      const tags = window.utils.getAllTags(allGpts);
      const container = document.getElementById('filter-tags');
      
      // –ö–Ω–æ–ø–∫–∞ "–í—Å—ñ" –≤–∂–µ —î –≤ HTML
      
      // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ–≥—É
      tags.forEach(tag => {
        const button = document.createElement('button');
        button.className = 'filter-tag';
        button.dataset.tag = tag;
        button.textContent = tag;
        button.onclick = () => filterByTag(tag);
        container.appendChild(button);
      });
    }
    
    // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Ç–µ–≥—É
    function filterByTag(tag) {
      currentTag = tag;
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –∞–∫—Ç–∏–≤–Ω—É –∫–Ω–æ–ø–∫—É
      document.querySelectorAll('.filter-tag').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.tag === tag);
      });
      
      displayGpts();
    }
    
    // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
    function setupSearch() {
      const searchInput = document.getElementById('search-input');
      
      // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ debounce –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
      const debouncedSearch = window.utils.debounce((query) => {
        currentSearch = query;
        
        // –Ø–∫—â–æ —î –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç ‚Äî —Å–∫–∏–¥–∞—î–º–æ —Ñ—ñ–ª—å—Ç—Ä —Ç–µ–≥—ñ–≤ –Ω–∞ "–í—Å—ñ"
        if (query.trim() !== '') {
          currentTag = 'all';
          document.querySelectorAll('.filter-tag').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.tag === 'all');
          });
        }
        
        displayGpts();
      }, 300);
      
      searchInput.addEventListener('input', (e) => {
        debouncedSearch(e.target.value);
      });
    }
    
    // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è GPTs –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é
    function displayGpts() {
      const grid = document.getElementById('gpts-grid');
      const noResults = document.getElementById('no-results');
      const resultsCount = document.getElementById('results-count');
      
      // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –ø–æ —Ç–µ–≥—É
      let filteredGpts = currentTag === 'all' 
        ? allGpts 
        : window.utils.filterByTag(allGpts, currentTag);
      
      // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –ø–æ –ø–æ—à—É–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Ç—É
      if (currentSearch) {
        filteredGpts = window.utils.searchItems(
          filteredGpts, 
          currentSearch,
          ['title', 'description', 'tags']
        );
      }
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫
      resultsCount.textContent = filteredGpts.length;
      
      // –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
      if (filteredGpts.length === 0) {
        grid.style.display = 'none';
        noResults.style.display = 'block';
        return;
      }
      
      // –ü–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
      grid.style.display = 'grid';
      noResults.style.display = 'none';
      grid.innerHTML = '';
      
      filteredGpts.forEach(gpt => {
        const card = document.createElement('a');
        card.className = 'card' + (gpt.featured ? ' featured' : '');
        card.href = `gpt.html?gpt=${gpt.slug}`;
        
        card.innerHTML = `
          <div class="thumb" style="display: flex; align-items: center; justify-content: center; font-size: 60px; background: var(--card-bg);">
            ${gpt.icon}
          </div>
          <div class="card-body">
            <h3>${highlightText(gpt.title, currentSearch)}</h3>
            ${gpt.featured ? '<div class="meta" style="color: var(--accent); font-weight: 600;">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ</div>' : ''}
            <p style="margin: 8px 0 0; color: var(--muted); font-size: 14px;">
              ${highlightText(gpt.description, currentSearch)}
            </p>
            ${gpt.tags && gpt.tags.length > 0 ? 
              `<div class="tags" style="margin-top: 12px;">
                ${gpt.tags.slice(0, 3).map(tag => `<span class="chip">#${tag}</span>`).join(' ')}
              </div>` : 
              ''
            }
          </div>
        `;
        
        grid.appendChild(card);
      });
    }
    
    // –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
    function highlightText(text, query) {
      if (!query || query.trim() === '') return text;
      
      const regex = new RegExp(`(${query})`, 'gi');
      return text.replace(regex, '<mark>$1</mark>');
    }
    
    // –ó–∞–ø—É—Å–∫
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadAllGpts);
    } else {
      loadAllGpts();
    }
  </script>
</body>
</html>
    <script>
        let allGpts = [];
        let filteredGpts = [];

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPTs –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('gpts.json');
                if (!response.ok) throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ GPTs');
                
                allGpts = await response.json();
                
                // –°–æ—Ä—Ç—É—î–º–æ: —Å–ø–æ—á–∞—Ç–∫—É featured, –ø–æ—Ç—ñ–º –∑–∞ –¥–∞—Ç–æ—é
                allGpts.sort((a, b) => {
                    if (a.featured && !b.featured) return -1;
                    if (!a.featured && b.featured) return 1;
                    return new Date(b.date) - new Date(a.date);
                });
                
                filteredGpts = [...allGpts];
                
                renderGpts(filteredGpts);
                renderTags();
                setupSearch();
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞:', error);
                document.getElementById('gpts-container').innerHTML = 
                    '<p class="error">‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPTs. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É.</p>';
            }
        });

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫—É GPTs
        function renderGpts(gpts) {
            const container = document.getElementById('gpts-container');
            const emptyState = document.getElementById('empty-state');
            
            if (gpts.length === 0) {
                container.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            container.style.display = 'grid';
            emptyState.style.display = 'none';
            
            container.innerHTML = gpts.map(gpt => `
                <article class="item-card ${gpt.featured ? 'featured' : ''}">
                    <div class="card-header">
                        <span class="gpt-icon">${gpt.icon}</span>
                        <div class="card-meta">
                            <time datetime="${gpt.date}">${formatDate(gpt.date)}</time>
                            ${gpt.featured ? '<span class="badge">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ</span>' : ''}
                        </div>
                    </div>
                    
                    <h2 class="card-title">
                        <a href="gpt.html?gpt=${gpt.slug}">${gpt.title}</a>
                    </h2>
                    
                    <p class="card-description">${gpt.description}</p>
                    
                    <div class="card-footer">
                        <div class="card-tags">
                            ${gpt.tags.map(tag => 
                                `<span class="tag" data-tag="${tag}">#${tag}</span>`
                            ).join('')}
                        </div>
                        <a href="${gpt.link}" class="btn-primary" target="_blank" rel="noopener">
                            –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ ‚Üí
                        </a>
                    </div>
                </article>
            `).join('');
            
            // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è —Ç–µ–≥—ñ–≤
            document.querySelectorAll('.card-tags .tag').forEach(tag => {
                tag.addEventListener('click', (e) => {
                    e.preventDefault();
                    filterByTag(tag.dataset.tag);
                });
            });
        }

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–µ–≥—ñ–≤
        function renderTags() {
            const allTags = [...new Set(allGpts.flatMap(gpt => gpt.tags))].sort();
            const tagsContainer = document.getElementById('tags');
            
            tagsContainer.innerHTML = `
                <button class="tag active" data-tag="all">–í—Å—ñ</button>
                ${allTags.map(tag => 
                    `<button class="tag" data-tag="${tag}">#${tag}</button>`
                ).join('')}
            `;
            
            // –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
            tagsContainer.querySelectorAll('.tag').forEach(tag => {
                tag.addEventListener('click', () => {
                    // –û–Ω–æ–≤–ª—é—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π —Ç–µ–≥
                    tagsContainer.querySelectorAll('.tag').forEach(t => 
                        t.classList.remove('active')
                    );
                    tag.classList.add('active');
                    
                    // –§—ñ–ª—å—Ç—Ä—É—î–º–æ
                    filterByTag(tag.dataset.tag);
                });
            });
        }

        // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —Ç–µ–≥–æ–º
        function filterByTag(tag) {
            if (tag === 'all') {
                filteredGpts = [...allGpts];
            } else {
                filteredGpts = allGpts.filter(gpt => 
                    gpt.tags.includes(tag)
                );
            }
            
            // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç
            const searchQuery = document.getElementById('search').value;
            if (searchQuery) {
                applySearch(searchQuery);
            } else {
                renderGpts(filteredGpts);
            }
        }

        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
        function setupSearch() {
            const searchInput = document.getElementById('search');
            
            searchInput.addEventListener('input', (e) => {
                applySearch(e.target.value);
            });
        }

        // –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
        function applySearch(query) {
            if (!query.trim()) {
                renderGpts(filteredGpts);
                return;
            }
            
            const searchQuery = query.toLowerCase();
            const searchResults = filteredGpts.filter(gpt => 
                gpt.title.toLowerCase().includes(searchQuery) ||
                gpt.description.toLowerCase().includes(searchQuery) ||
                gpt.tags.some(tag => tag.toLowerCase().includes(searchQuery))
            );
            
            renderGpts(searchResults);
        }

        // –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç–∏ (–¥–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è)
        function formatDate(dateString) {
            const date = new Date(dateString);
            const months = [
                '—Å—ñ—á–Ω—è', '–ª—é—Ç–æ–≥–æ', '–±–µ—Ä–µ–∑–Ω—è', '–∫–≤—ñ—Ç–Ω—è', '—Ç—Ä–∞–≤–Ω—è', '—á–µ—Ä–≤–Ω—è',
                '–ª–∏–ø–Ω—è', '—Å–µ—Ä–ø–Ω—è', '–≤–µ—Ä–µ—Å–Ω—è', '–∂–æ–≤—Ç–Ω—è', '–ª–∏—Å—Ç–æ–ø–∞–¥–∞', '–≥—Ä—É–¥–Ω—è'
            ];
            return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
        }
    </script>
</body>
</html>
