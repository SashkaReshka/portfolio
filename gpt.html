<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GPT ‚Äî –û–ª–µ–∫—Å–∞–Ω–¥—Ä</title>
  <meta name="description" content="Custom GPT –∞—Å–∏—Å—Ç–µ–Ω—Ç">
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/gpts-styles.css">
</head>
<body>
  <div class="layout">
    <aside id="navigation"></aside>

    <main>
      <div class="container">
        <article id="gpt-content" class="section">
          <div class="loading-state">
            <div class="spinner"></div>
            <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
          </div>
        </article>
      </div>
    </main>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/nav.js"></script>
  
  <script>
    // –û—Ç—Ä–∏–º—É—î–º–æ slug –∑ URL
    const urlParams = new URLSearchParams(window.location.search);
    const gptSlug = urlParams.get('gpt');

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPT –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
    document.addEventListener('DOMContentLoaded', async () => {
      if (!gptSlug) {
        showError('GPT –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. <a href="gpts.html">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>');
        return;
      }

      try {
        const response = await fetch('data/gpts.json');
        if (!response.ok) throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ');
        
        const gpts = await response.json();
        const gpt = gpts.find(p => p.slug === gptSlug);
        
        if (!gpt) {
          showError('GPT –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. <a href="gpts.html">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>');
          return;
        }
        
        renderGpt(gpt);
        updateMetaTags(gpt);
      } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞:', error);
        showError('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPT. <a href="gpts.html">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>');
      }
    });

    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ GPT
    function renderGpt(gpt) {
      const container = document.getElementById('gpt-content');
      
      // –§–æ—Ä–º—É—î–º–æ —Ç–µ–≥–∏
      const tagsHTML = gpt.tags && gpt.tags.length > 0
        ? gpt.tags.map(tag => `<a href="gpts.html?tag=${tag}" class="chip">#${tag}</a>`).join(' ')
        : '';
      
      container.innerHTML = `
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="font-size: 80px; line-height: 1; margin-bottom: 1rem;">
            ${gpt.icon}
          </div>
          <h1>${gpt.title}</h1>
          <p class="meta" style="font-size: 18px; margin: 16px 0;">
            ${gpt.description}
          </p>
          ${tagsHTML ? `<div style="margin: 16px 0;">${tagsHTML}</div>` : ''}
          ${gpt.featured ? '<div class="meta" style="color: var(--accent); font-weight: 600; margin-top: 8px;">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ</div>' : ''}
          <div style="margin-top: 24px;">
            <a href="${gpt.link}" class="btn btn-accent" target="_blank" rel="noopener" style="font-size: 16px; padding: 12px 32px;">
              üöÄ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ GPT
            </a>
          </div>
        </div>
        
        <div class="content" style="margin-top: 3rem;">
          ${gpt.content}
        </div>
        
        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border); text-align: center;">
          <a href="gpts.html" class="btn">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
        </div>
      `;
    }

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è meta-—Ç–µ–≥—ñ–≤
    function updateMetaTags(gpt) {
      document.title = `${gpt.title} ‚Äî GPTs Lab ‚Äî –û–ª–µ–∫—Å–∞–Ω–¥—Ä`;
      
      // –û–Ω–æ–≤–ª—é—î–º–æ description
      let metaDescription = document.querySelector('meta[name="description"]');
      if (!metaDescription) {
        metaDescription = document.createElement('meta');
        metaDescription.name = 'description';
        document.head.appendChild(metaDescription);
      }
      metaDescription.content = gpt.description;
    }

    // –ü–æ–∫–∞–∑ –ø–æ–º–∏–ª–∫–∏
    function showError(message) {
      const container = document.getElementById('gpt-content');
      container.innerHTML = `
        <div class="error-message" style="text-align: center; padding: 3rem 1rem;">
          <p style="font-size: 18px;">‚ùå ${message}</p>
        </div>
      `;
    }
  </script>
</body>
</html>
    <script>
        // –û—Ç—Ä–∏–º—É—î–º–æ slug –∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const gptSlug = urlParams.get('gpt');

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPT –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
        document.addEventListener('DOMContentLoaded', async () => {
            if (!gptSlug) {
                showError('GPT –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. <a href="gpts.html">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>');
                return;
            }

            try {
                const response = await fetch('gpts.json');
                if (!response.ok) throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ');
                
                const gpts = await response.json();
                const gpt = gpts.find(p => p.slug === gptSlug);
                
                if (!gpt) {
                    showError('GPT –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. <a href="gpts.html">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>');
                    return;
                }
                
                renderGpt(gpt);
                setupNavigation(gpts, gptSlug);
                updateMetaTags(gpt);
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞:', error);
                showError('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GPT. <a href="gpts.html">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>');
            }
        });

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ GPT
        function renderGpt(gpt) {
            const container = document.getElementById('gpt-content');
            
            container.innerHTML = `
                <article class="gpt-detail">
                    <header class="gpt-header">
                        <div class="gpt-icon-large">${gpt.icon}</div>
                        <div class="gpt-header-content">
                            <h1>${gpt.title}</h1>
                            <p class="gpt-description">${gpt.description}</p>
                            <div class="gpt-meta">
                                <time datetime="${gpt.date}">${formatDate(gpt.date)}</time>
                                <div class="gpt-tags">
                                    ${gpt.tags.map(tag => 
                                        `<a href="gpts.html?tag=${tag}" class="tag">#${tag}</a>`
                                    ).join('')}
                                </div>
                            </div>
                            <a href="${gpt.link}" class="btn-primary btn-large" target="_blank" rel="noopener">
                                üöÄ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ GPT
                            </a>
                        </div>
                    </header>

                    <div class="gpt-content">
                        ${gpt.content}
                    </div>

                    <footer class="gpt-footer">
                        <a href="${gpt.link}" class="btn-primary" target="_blank" rel="noopener">
                            –í—ñ–¥–∫—Ä–∏—Ç–∏ GPT –≤ ChatGPT ‚Üí
                        </a>
                        <a href="gpts.html" class="btn-secondary">
                            ‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É
                        </a>
                    </footer>
                </article>
            `;
        }

        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –º—ñ–∂ GPTs
        function setupNavigation(gpts, currentSlug) {
            // –°–æ—Ä—Ç—É—î–º–æ —Ç–∞–∫ —Å–∞–º–æ —è–∫ –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
            gpts.sort((a, b) => {
                if (a.featured && !b.featured) return -1;
                if (!a.featured && b.featured) return 1;
                return new Date(b.date) - new Date(a.date);
            });

            const currentIndex = gpts.findIndex(p => p.slug === currentSlug);
            const prevGpt = gpts[currentIndex - 1];
            const nextGpt = gpts[currentIndex + 1];

            const navigation = document.querySelector('.post-navigation');
            const prevLink = document.getElementById('prev-gpt');
            const nextLink = document.getElementById('next-gpt');

            if (prevGpt || nextGpt) {
                navigation.style.display = 'flex';

                if (prevGpt) {
                    prevLink.href = `gpt.html?gpt=${prevGpt.slug}`;
                    prevLink.textContent = `‚Üê ${prevGpt.title}`;
                    prevLink.style.visibility = 'visible';
                } else {
                    prevLink.style.visibility = 'hidden';
                }

                if (nextGpt) {
                    nextLink.href = `gpt.html?gpt=${nextGpt.slug}`;
                    nextLink.textContent = `${nextGpt.title} ‚Üí`;
                    nextLink.style.visibility = 'visible';
                } else {
                    nextLink.style.visibility = 'hidden';
                }
            }
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è meta-—Ç–µ–≥—ñ–≤
        function updateMetaTags(gpt) {
            document.title = `${gpt.title} ‚Äî GPTs Lab ‚Äî –û–ª–µ–∫—Å–∞–Ω–¥—Ä –õ–æ–ø–∞—Ü—å–∫–∏–π`;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ description
            let metaDescription = document.querySelector('meta[name="description"]');
            if (!metaDescription) {
                metaDescription = document.createElement('meta');
                metaDescription.name = 'description';
                document.head.appendChild(metaDescription);
            }
            metaDescription.content = gpt.description;
        }

        // –ü–æ–∫–∞–∑ –ø–æ–º–∏–ª–∫–∏
        function showError(message) {
            const container = document.getElementById('gpt-content');
            container.innerHTML = `
                <div class="error-state">
                    <p>‚ùå ${message}</p>
                </div>
            `;
        }

        // –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç–∏
        function formatDate(dateString) {
            const date = new Date(dateString);
            const months = [
                '—Å—ñ—á–Ω—è', '–ª—é—Ç–æ–≥–æ', '–±–µ—Ä–µ–∑–Ω—è', '–∫–≤—ñ—Ç–Ω—è', '—Ç—Ä–∞–≤–Ω—è', '—á–µ—Ä–≤–Ω—è',
                '–ª–∏–ø–Ω—è', '—Å–µ—Ä–ø–Ω—è', '–≤–µ—Ä–µ—Å–Ω—è', '–∂–æ–≤—Ç–Ω—è', '–ª–∏—Å—Ç–æ–ø–∞–¥–∞', '–≥—Ä—É–¥–Ω—è'
            ];
            return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
        }
    </script>
</body>
</html>
